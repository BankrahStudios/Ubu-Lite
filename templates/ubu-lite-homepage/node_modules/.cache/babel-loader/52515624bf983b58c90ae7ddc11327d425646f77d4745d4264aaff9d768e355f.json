{"ast":null,"code":"import React,{useEffect,useState}from'react';import{api}from'../api';import{getToken}from'../auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ServiceDetail=_ref=>{let{match}=_ref;const id=match.params.id;const[svc,setSvc]=useState(null);const[date,setDate]=useState('');const[status,setStatus]=useState(null);const[error,setError]=useState(null);useEffect(()=>{api.getService(id).then(setSvc).catch(()=>setSvc(null));},[id]);const submit=async e=>{e.preventDefault();setStatus(null);setError(null);const token=getToken();if(!token){setError('Login required');return;}try{const booking=await api.createBooking({service:Number(id),date,status:'pending'},token);setStatus(\"Booking created (id \".concat(booking.id,\").\"));}catch(err){setError(err.message||'Booking failed');}};if(!svc)return/*#__PURE__*/_jsx(\"div\",{style:{padding:20},children:\"Loading service...\"});return/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:800,margin:'30px auto'},children:[/*#__PURE__*/_jsx(\"h2\",{children:svc.title}),/*#__PURE__*/_jsx(\"div\",{children:svc.description}),/*#__PURE__*/_jsxs(\"div\",{children:[\"Category: \",svc.category,\" \\u2014 Price: $\",svc.price]}),/*#__PURE__*/_jsx(\"h3\",{style:{marginTop:20},children:\"Request Booking\"}),status&&/*#__PURE__*/_jsx(\"div\",{style:{color:'green'},children:status}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:date,onChange:e=>setDate(e.target.value),className:\"input\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",style:{marginLeft:8},children:\"Send Request\"})]})]});};export default ServiceDetail;","map":{"version":3,"names":["React","useEffect","useState","api","getToken","jsx","_jsx","jsxs","_jsxs","ServiceDetail","_ref","match","id","params","svc","setSvc","date","setDate","status","setStatus","error","setError","getService","then","catch","submit","e","preventDefault","token","booking","createBooking","service","Number","concat","err","message","style","padding","children","maxWidth","margin","title","description","category","price","marginTop","color","onSubmit","type","value","onChange","target","className","marginLeft"],"sources":["C:/Users/Kojos/OneDrive/Desktop/Ubu-Lite/templates/ubu-lite-homepage/src/pages/ServiceDetail.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { RouteComponentProps } from 'react-router-dom';\nimport { api } from '../api';\nimport { getToken } from '../auth';\n\ntype Params = { id: string };\n\nconst ServiceDetail: React.FC<RouteComponentProps<Params>> = ({ match }) => {\n  const id = match.params.id;\n  const [svc, setSvc] = useState<any>(null);\n  const [date, setDate] = useState('');\n  const [status, setStatus] = useState<string | null>(null);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    api.getService(id).then(setSvc).catch(()=>setSvc(null));\n  }, [id]);\n\n  const submit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setStatus(null); setError(null);\n    const token = getToken();\n    if (!token) { setError('Login required'); return; }\n    try {\n      const booking = await api.createBooking({ service: Number(id), date, status: 'pending' }, token);\n      setStatus(`Booking created (id ${booking.id}).`);\n    } catch (err:any) {\n      setError(err.message || 'Booking failed');\n    }\n  };\n\n  if (!svc) return <div style={{ padding: 20 }}>Loading service...</div>;\n\n  return (\n    <div style={{ maxWidth: 800, margin: '30px auto' }}>\n      <h2>{svc.title}</h2>\n      <div>{svc.description}</div>\n      <div>Category: {svc.category} â€” Price: ${svc.price}</div>\n      <h3 style={{ marginTop: 20 }}>Request Booking</h3>\n      {status && <div style={{ color: 'green' }}>{status}</div>}\n      {error && <div style={{ color: 'red' }}>{error}</div>}\n      <form onSubmit={submit}>\n        <input type=\"date\" value={date} onChange={e=>setDate(e.target.value)} className=\"input\" />\n        <button className=\"btn\" style={{ marginLeft: 8 }}>Send Request</button>\n      </form>\n    </div>\n  );\n};\n\nexport default ServiceDetail;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}