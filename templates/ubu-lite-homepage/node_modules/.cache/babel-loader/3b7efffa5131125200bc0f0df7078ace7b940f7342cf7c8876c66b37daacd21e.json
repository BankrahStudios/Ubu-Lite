{"ast":null,"code":"import React,{useEffect,useState}from'react';import Toast from'../components/Toast';import{api}from'../api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Book=()=>{const[token,setToken]=useState(null);const[serviceId,setServiceId]=useState('');const[date,setDate]=useState('');const[duration,setDuration]=useState(60);const[notes,setNotes]=useState('');const[result,setResult]=useState(null);const[error,setError]=useState(null);const[message,setMessage]=useState(null);const tz=Intl.DateTimeFormat().resolvedOptions().timeZone||'local time';useEffect(()=>{setToken(localStorage.getItem('ubu_auth_token'));const params=new URLSearchParams(window.location.search);const s=params.get('service');if(s)setServiceId(s);},[]);async function submit(e){e.preventDefault();setError(null);setResult(null);if(!token){setError('Please log in first.');return;}if(!serviceId||!date){setError('Service and date are required.');return;}try{const payload={service:Number(serviceId),date:new Date(date).toISOString(),duration_minutes:duration,notes};const res=await api.createBooking(payload,token);setResult(res);setMessage('Booking request sent. We\\'ll notify the creative.');setTimeout(()=>setMessage(null),4000);}catch(err){setError((err===null||err===void 0?void 0:err.message)||'Booking failed');}}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-[var(--bg)] text-[var(--text)]\",children:[/*#__PURE__*/_jsx(\"header\",{className:\"border-b border-[color:var(--border)]\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"mx-auto max-w-3xl px-4 sm:px-6 py-4 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"a\",{href:\"/\",className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"pill h-9 w-9 flex items-center justify-center bg-[var(--navy-800)] text-white font-bold\",children:\"U\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"font-semibold text-lg tracking-tight\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-[var(--navy-800)]\",children:\"UBU\"}),\" Lite\"]})]}),/*#__PURE__*/_jsxs(\"nav\",{className:\"text-sm flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"a\",{className:\"hover:text-[var(--text)]\",href:\"/studio\",children:\"Studio\"}),/*#__PURE__*/_jsx(\"a\",{className:\"hover:text-[var(--text)]\",href:\"/faq\",children:\"FAQ\"})]})]})}),/*#__PURE__*/_jsxs(\"main\",{className:\"mx-auto max-w-3xl px-4 sm:px-6 py-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-semibold\",children:\"Book a Call\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[var(--muted)]\",children:\"Create a booking against a service by ID (demo).\"}),!token&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 rounded-2xl border border-[color:var(--border)] bg-[var(--card)] p-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"Sign in required\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-[var(--muted)]\",children:\"Please log in to create a booking.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex gap-2\",children:[/*#__PURE__*/_jsx(\"a\",{href:\"/login/\",className:\"btn pill bg-[var(--orange-600)] hover:bg-[var(--orange-700)] text-white px-4 py-2\",children:\"Log in\"}),/*#__PURE__*/_jsx(\"a\",{href:\"/register/\",className:\"btn pill border border-[color:var(--border)] px-4 py-2\",children:\"Register\"})]})]}),message&&/*#__PURE__*/_jsx(Toast,{message:message,onClose:()=>setMessage(null)}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,className:\"mt-4 rounded-2xl border border-[color:var(--border)] bg-[var(--card)] p-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid sm:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsx(\"input\",{value:serviceId,onChange:e=>setServiceId(e.target.value),placeholder:\"Service ID (e.g., 1)\",className:\"pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:date,onChange:e=>setDate(e.target.value),className:\"w-full pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-1 text-xs text-[var(--muted)]\",children:[\"Time is in \",tz,\". We store in UTC.\"]})]}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:15,step:15,value:duration,onChange:e=>setDuration(Number(e.target.value)),className:\"pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\"}),/*#__PURE__*/_jsx(\"input\",{value:notes,onChange:e=>setNotes(e.target.value),placeholder:\"Notes (optional)\",className:\"pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"mt-4 btn pill bg-[var(--orange-600)] hover:bg-[var(--orange-700)] text-white px-5 py-2\",children:\"Create Booking\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 text-[var(--muted)]\",children:error}),result&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 rounded-xl border border-[color:var(--border)] bg-[var(--bg-soft)] p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"font-medium\",children:\"Booking created\"}),/*#__PURE__*/_jsx(\"pre\",{className:\"text-sm overflow-auto\",children:JSON.stringify(result,null,2)})]})]})]})]});};export default Book;","map":{"version":3,"names":["React","useEffect","useState","Toast","api","jsx","_jsx","jsxs","_jsxs","Book","token","setToken","serviceId","setServiceId","date","setDate","duration","setDuration","notes","setNotes","result","setResult","error","setError","message","setMessage","tz","Intl","DateTimeFormat","resolvedOptions","timeZone","localStorage","getItem","params","URLSearchParams","window","location","search","s","get","submit","e","preventDefault","payload","service","Number","Date","toISOString","duration_minutes","res","createBooking","setTimeout","err","className","children","href","onClose","onSubmit","value","onChange","target","placeholder","type","min","step","JSON","stringify"],"sources":["C:/Users/Kojos/OneDrive/Desktop/Ubu-Lite/templates/ubu-lite-homepage/src/pages/Book.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport Toast from '../components/Toast';\nimport { api } from '../api';\n\nconst Book: React.FC = () => {\n  const [token, setToken] = useState<string | null>(null);\n  const [serviceId, setServiceId] = useState('');\n  const [date, setDate] = useState('');\n  const [duration, setDuration] = useState(60);\n  const [notes, setNotes] = useState('');\n  const [result, setResult] = useState<any>(null);\n  const [error, setError] = useState<string | null>(null);\n  const [message, setMessage] = useState<string | null>(null);\n  const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'local time';\n\n  useEffect(() => {\n    setToken(localStorage.getItem('ubu_auth_token'));\n    const params = new URLSearchParams(window.location.search);\n    const s = params.get('service');\n    if (s) setServiceId(s);\n  }, []);\n\n  async function submit(e: React.FormEvent) {\n    e.preventDefault();\n    setError(null); setResult(null);\n    if (!token) { setError('Please log in first.'); return; }\n    if (!serviceId || !date) { setError('Service and date are required.'); return; }\n    try {\n      const payload = { service: Number(serviceId), date: new Date(date).toISOString(), duration_minutes: duration, notes };\n      const res = await api.createBooking(payload, token);\n      setResult(res);\n      setMessage('Booking request sent. We\\'ll notify the creative.');\n      setTimeout(()=>setMessage(null), 4000);\n    } catch (err: any) {\n      setError(err?.message || 'Booking failed');\n    }\n  }\n\n  return (\n    <div className=\"min-h-screen bg-[var(--bg)] text-[var(--text)]\">\n      <header className=\"border-b border-[color:var(--border)]\">\n        <div className=\"mx-auto max-w-3xl px-4 sm:px-6 py-4 flex items-center justify-between\">\n          <a href=\"/\" className=\"flex items-center gap-3\">\n            <div className=\"pill h-9 w-9 flex items-center justify-center bg-[var(--navy-800)] text-white font-bold\">U</div>\n            <span className=\"font-semibold text-lg tracking-tight\"><span className=\"text-[var(--navy-800)]\">UBU</span> Lite</span>\n          </a>\n          <nav className=\"text-sm flex items-center gap-3\">\n            <a className=\"hover:text-[var(--text)]\" href=\"/studio\">Studio</a>\n            <a className=\"hover:text-[var(--text)]\" href=\"/faq\">FAQ</a>\n          </nav>\n        </div>\n      </header>\n\n      <main className=\"mx-auto max-w-3xl px-4 sm:px-6 py-10\">\n        <h1 className=\"text-2xl font-semibold\">Book a Call</h1>\n        <p className=\"text-[var(--muted)]\">Create a booking against a service by ID (demo).</p>\n        {!token && (\n          <div className=\"mt-4 rounded-2xl border border-[color:var(--border)] bg-[var(--card)] p-5\">\n            <div className=\"font-medium\">Sign in required</div>\n            <div className=\"text-sm text-[var(--muted)]\">Please log in to create a booking.</div>\n            <div className=\"mt-3 flex gap-2\">\n              <a href=\"/login/\" className=\"btn pill bg-[var(--orange-600)] hover:bg-[var(--orange-700)] text-white px-4 py-2\">Log in</a>\n              <a href=\"/register/\" className=\"btn pill border border-[color:var(--border)] px-4 py-2\">Register</a>\n            </div>\n          </div>\n        )}\n        {message && <Toast message={message} onClose={()=>setMessage(null)} />}\n        <form onSubmit={submit} className=\"mt-4 rounded-2xl border border-[color:var(--border)] bg-[var(--card)] p-5\">\n          <div className=\"grid sm:grid-cols-2 gap-4\">\n            <input value={serviceId} onChange={e=>setServiceId(e.target.value)} placeholder=\"Service ID (e.g., 1)\" className=\"pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\" />\n            <div>\n              <input type=\"datetime-local\" value={date} onChange={e=>setDate(e.target.value)} className=\"w-full pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\" />\n              <div className=\"mt-1 text-xs text-[var(--muted)]\">Time is in {tz}. We store in UTC.</div>\n            </div>\n            <input type=\"number\" min={15} step={15} value={duration} onChange={e=>setDuration(Number(e.target.value))} className=\"pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\" />\n            <input value={notes} onChange={e=>setNotes(e.target.value)} placeholder=\"Notes (optional)\" className=\"pill border border-[color:var(--border)] bg-[var(--bg-soft)] px-4 py-2\" />\n          </div>\n          <button className=\"mt-4 btn pill bg-[var(--orange-600)] hover:bg-[var(--orange-700)] text-white px-5 py-2\">Create Booking</button>\n          {error && <div className=\"mt-3 text-[var(--muted)]\">{error}</div>}\n          {result && (\n            <div className=\"mt-4 rounded-xl border border-[color:var(--border)] bg-[var(--bg-soft)] p-4\">\n              <div className=\"font-medium\">Booking created</div>\n              <pre className=\"text-sm overflow-auto\">{JSON.stringify(result, null, 2)}</pre>\n            </div>\n          )}\n        </form>\n      </main>\n    </div>\n  );\n};\n\nexport default Book;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}